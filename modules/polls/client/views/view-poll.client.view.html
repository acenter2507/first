<section class="container">
  <div class="row">
    <!--     <div class="col col-xs-12 col-sm-12 col-md-8 col-lg-8"></div>
    <div class="col col-xs-12 col-sm-12 col-md-4 col-lg-4"></div> -->
    <div class="page-header">
      <h3 ng-bind="vm.poll.title"></h3>
    </div>
    <div class="icon pull-left">
      <a ui-sref="users.info({userId: cmt.user._id})" ng-if="vm.poll.user">
        <img src="{{vm.poll.user.profileImageURL}}" alt="{{vm.poll.user.displayName}}">
      </a>
    </div>
    <small class="pull-left">
      <strong><a ui-sref="users.info({userId: vm.poll.user._id})" ng-if="vm.poll.user" ng-bind="vm.poll.user.displayName"></a></strong>
      <span ng-if="!vm.poll.user">Deleted User</span>
      <span>&nbsp;on&nbsp;</span>
      <span ng-bind="vm.poll.created | date:'mediumDate'"></span>
    </small>
    <br>
    <p class="text-justify" ng-bind="vm.poll.body"></p>
    <span class="pull-right" class="like_tools">
      <a href="#" ng-click="vm.like_poll()"><i class="fa fa-thumbs-o-up" aria-hidden="true"></i></a>
        <span class="mg5l mg5r" ng-bind="vm.poll.likeCnt"></span>
    <a href="#" ng-click="vm.dislike_poll()"><i class="fa fa-thumbs-o-down" aria-hidden="true"></i></a>
    </span>
    <div class="clearfix"></div>
    <hr>
  </div>
  <div ui-view="opts"></div>
  <!-- Control -->
  <div class="row">
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 pdnl pdnr">
      <select class="form-control sort" ng-model="vm.cmt_sort" ng-options="sort.val as sort.name for sort in vm.cmt_sorts"></select>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 pdnl pdnr">
      <div class="poll_info pull-right">
        <div class="poll_info_item">
          <span class="text-center">VIEW</span>
          <span class="text-center" ng-bind="vm.poll.viewCnt"></span><br>
        </div>
        <div class="poll_info_item">
          <span class="text-center">VOTE</span>
          <span class="text-center" ng-bind="vm.poll.voteCnt"></span><br>
        </div>
        <div class="poll_info_item">
          <span class="text-center">COMMENT</span>
          <span class="text-center" ng-bind="vm.cmts.length"></span><br>
        </div>
      </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 pdnl pdnr">
      <div class="pull-right">
        <a class="btn btn-info" ui-sref="polls.edit({ pollId: vm.poll._id })" ng-if="vm.poll.isCurrentUserOwner || vm.poll.canEdit">
          <i class="glyphicon glyphicon-edit"></i> Edit
        </a>
        <a class="btn btn-danger" ng-click="vm.remove()" ng-if="vm.poll.isCurrentUserOwner || vm.poll.canEdit">
          <i class="glyphicon glyphicon-trash"></i> Delete
        </a>
        <button class="btn btn-primary" ng-click="vm.reply()"><i class="fa fa-reply" aria-hidden="true"></i> Reply</button>
        <button ng-if="!vm.poll.isCurrentUserOwner && !vm.poll.canEdit && vm.poll.allow_add && vm.authentication.user" class="btn btn-warning" ng-click="vm.add_opt()"><i class="fa fa-plus" aria-hidden="true"></i> Suggest option</button>
      </div>
    </div>
    <div class="clearfix"></div>
    <hr>
  </div>
  <!-- #Control -->
  <div ui-view="cmts"></div>
  <div class="row">
    <div class="col-xs-12">
      <h4>Tags: <small>{{(!vm.poll.tags.length) ? 'Has no tag added' : ''}}</small></h4>
      <ul class="tags" ng-show="vm.poll.tags.length">
        <li ng-repeat="tag in vm.poll.tags"><a ui-sref="tags.view({ tagId: tag._id })" class="tag">{{tag.name}}</a></li>
      </ul>
    </div>
  </div>
</section>
